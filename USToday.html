<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html> 
<head>
    <title>US Today API</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script type="text/javascript">

			$(document).ready(function() {
				localStorage.setItem('lsLocation', 'New York');
				localStorage.setItem('lsQuery', 'new york,times,square');
			});

			$(document).ready(function() {
				getNews(10,0);
			});

			function getNews(limit, offset) {
				

				var query = 'global-warming,obama';

				//$("#ansDiv").append("<p>function called: " + limit + ", " + offset + " - " + query + "</p>");
				var results = [];
				var index = 0;
				   $.ajax({
						url : 'http://api.usatoday.com/open/articles?tag='+query+'&count=20&encoding=json&api_key=jp7pjmyhba9r7g6vcwdcvs97',
						async : false,
						dataType: "json",
						success : function(data) {
							// do stuff with response.
							$('#result').html('');
							var all = data.stories;
							var ul = $('ul#list'); 
					
							for ( j = 0; ((index < limit) && (j < all.length)); j++) {
								results[index] = all[j];
								index = index + 1;
							
								console.log(results);
							}
							
							
						}
					});
			}
</script>

</head>
<body>
    <div class="main">
        <h2>Current news of your interest</h2>
        <hr />
        <div class="images">
            <div style="text-align:center" id="result"></div>
            <div>
                <ul id="list"></ul>
            </div>
        </div>
        <hr />
         <!-- <div class="button"><a class="button white bigrounded" id="load_more">Load More</a></div> -->
    </div>
</body>
</html>
